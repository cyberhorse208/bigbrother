

## 目的

监控一个以tcp实现的网络请求，经过了哪些提供服务的服务器，最终得以返回响应。
> 暂不考虑各服务器之间可能使用http来实现数据交换的情况。

> 暂时只考虑在请求初始发起点获取此请求的参与处理方。


## 场景

假设客户端到服务器，以及各个服务器之间的tcp连接都是长连接，每个连接上面都可能有多个请求。

否则，如果是短连接，每个请求一个tcp连接的话，性能问题应该较大，需要先优化成长连接。

以下场景均假设客户端与服务器之间，服务器之间的tcp连接已经建立。

### 场景1

*	客户端发起一个请求R1到服务器A，请求数据D
*	服务器A解析请求，发现数据D有部分数据DB要从服务器B获取
* 	服务器A向B请求数据
* 	服务器B发现DB的部分数据DC需要从服务器C获取
* 	服务器B向C请求数据
* 	服务器C返回数据DC给B
*	服务器B返回DB+DC给A
*	服务器A返回数据D给client

监控预期结果：

> 在client端，可以知道R1先后引起服务器A，B，C参与处理	

### 场景2

*	客户端发起一个请求R2到服务器A，请求数据D；
*	服务器A解析请求，发现数据D有多个组成部分，分别要从服务器B，D获取数据DB，DD；
*	服务器A发起请求到B，请求数据DB；服务器A发起请求到D，请求数据DD。
*	服务器B，D分别返回数据DB，DD到服务器A。
*	服务器A返回数据D给client

监控预期结果：

> 在client端，可以知道请求R2先后引起服务器A，B，D参与处理	


注意这里的**参与处理**并不是处理相同tcp数据流，因为很明显服务器之间的tcp流与客户端到服务器的tcp流是不一样的。


## 限制

1. 不修改使用tcp连接进行服务的业务模块

2. 每个请求单独顺序记录参与的服务器标示列表

